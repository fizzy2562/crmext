(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var e,r,s,n,o,t,i,a,c,u,l;e=require("jquery"),s=require("underscore"),window.$=window.jQuery=e,r=require("urijs"),a=null,/jobDetails\.html$/.test(window.location.pathname)?require("./jobDetails").init():(i=new r(window.location).query(!0),window.queryData=i,e("#js-ui-"+i.ui).prop("checked",!0),e("#js-email").text(i.email),i.apiDisabled&&e("#js-no-api").show(),e(".js-login").on("click",function(e){return chrome.runtime.sendMessage({route:"GET /sf/login"},function(){return console.log("LOGGED IN")})}),e(".js-logout").on("click",function(e){return chrome.runtime.sendMessage({route:"GET /sf/logout"},function(){return console.log("LOGGED OUT"),window.close()})}),e(".js-setting-option").on("change",function(r){var n,o,t,i;return n=e(r.target).attr("name"),o=e(".js-settings").serializeArray(),t=s.findWhere(o,{name:n}),i={},i[n]=t.value,chrome.runtime.sendMessage({route:"POST /settings",body:i},function(e){})}),setTimeout(function(){return e(".js-settings").removeClass("initializing")},0),u=0,e("#js-progress-container").on("click",".js-dismiss-job",function(r){var s,n;return clearInterval(a),n=e(r.target).closest(".js-job"),s=n.data("id"),n.animate({height:0},200,function(){return n.remove()}),u--,chrome.runtime.sendMessage({route:"DELETE /export/jobs/"+s},function(e){return o()})}),e("#js-progress-container").on("click",".js-job-details",function(r){var s,n;return n=e(r.target).closest(".js-job"),s=n.data("id"),chrome.runtime.sendMessage({route:"GET /export/jobs/"+s},function(e){var r,n,o;return o="/html/browserAction/jobDetails.html?job="+encodeURIComponent(JSON.stringify(e.body)),n="Export Details "+s,r="toolbar=yes,location=yes,scrollbars=no,resizable=no,centerscreen=yes,width=675,height=524",window.open(o,n,r)})}),t=function(e){return s.some(e.steps,function(e){return s.some(e,function(e){return null==e})})},n=function(e){var r;return r=s.last(e.steps),s.reduce(r,function(e,r){return null==r&&e++,e},0)},o=function(){return a=setInterval(function(){return chrome.runtime.sendMessage({route:"GET /export/jobs"},function(e){var r;return r=e.body||[],r.length!==u&&(u=r.length,c(r)),l(r)})},500)},c=function(r){return s.each(r,function(r){var s,n,o,t;return s=r.active?"active":"","csv"===r.type?n=r.length+" to csv":(o=1===r.length?"":"s",n=r.length+" "+r.type+o),t=e('<div id="js-job-'+r.id+'" class="job js-job" data-id="'+r.id+'">\n	<div id="js-progress-'+r.id+'" class="progress">\n		<div class="progress-bar progress-bar-info progress-bar-striped '+s+'" role="progressbar" style="width: '+r.progress+'%;">\n			'+r.name+" - "+n+"\n		</div>\n	</div>\n</div>"),e("#js-progress-container").append(t)})},l=function(r){return s.each(r,function(r,s){var o,i,a,c,u,l;return c=e("#js-job-"+r.id),c.find(".progress-bar").css("width",r.progress+"%"),t(r)&&(c.find(".progress-bar").removeClass("progress-bar-info"),c.find(".progress-bar").addClass("progress-bar-warning")),r.active?c.find(".progress-bar").addClass("active"):c.find(".progress-bar").removeClass("active"),"csv"===r.type?(o=r.length+" to csv",u="no-link"):(l=1===r.length?"":"s",o=r.length+" "+r.type+l,u=""),r.complete&&(c.find(".progress-bar").css("width","100%"),c.find(".progress-bar").removeClass("progress-bar-striped"),c.find(".progress-bar").html('<a href="#" class="js-job-details control '+u+'">'+r.name+" - "+o+'</a><a href="#" class="js-dismiss-job dismiss">&times;</a>'),t(r))?(c.find(".progress-bar").removeClass("progress-bar-info"),c.find(".progress-bar").removeClass("progress-bar-warning"),c.find(".progress-bar").addClass("progress-bar-danger"),i=n(r),a=1===i?"error":"errors",c.find(".progress-bar").html('<a href="#" class="js-job-details control '+u+'">'+r.name+" - "+o+" - "+i+" "+a+'</a><a href="#" class="js-dismiss-job dismiss">&times;</a>')):void 0})},chrome.runtime.sendMessage({route:"GET /export/jobs"},function(e){var r;return r=e.body||[],u=r.length,c(r),l(r)}),o());


},{"./jobDetails":2,"jquery":"jquery","underscore":"underscore","urijs":"urijs"}],2:[function(require,module,exports){
var e,a,t;e=require("jquery"),a=require("underscore"),t={lead:"Lead",contact:"Contact"},exports.init=function(){var l,d;return l=JSON.parse(decodeURIComponent(window.location.search.split("=")[1])),d=e(".js-job-table"),d.find(".js-job-type-header").text(t[l.type]||""),l.createTasks&&d.find("thead tr").append("<th>Task</th>"),a.each(l.details,function(e){var a,t,r,s,i,n,p,c;return s=e.profileUrl,t=e.profile,p=e.url,i=e.taskUrl,null==t||null==p||null==i&&l.createTasks?a="fail":("skipped"===p||"skipped"===i)&&(a="skipped"),r=null!=t?'<td><a href="'+s+'" target="_blank">'+(t.firstName||"")+" "+(t.lastName||"")+"</a></td>":'<td class="fail-cell"><a href="'+s+'" target="_blank">?</a> (Failed to get info from profile)</td>',c=null!=p?"skipped"===p?'<td class="skipped-cell">Skipped</td>':'<td><a href="'+p+'" target="_blank">View in Salesforce</a></td>':'<td class="fail-cell">Failed</td>',n=null!=i?"skipped"===i?'<td class="skipped-cell">Skipped</td>':'<td><a href="'+i+'" target="_blank">View</a></td>':l.createTasks?'<td class="fail-cell">Failed</td>':"",d.find("tbody").append('<tr class="'+a+'">\n	'+r+"\n	"+c+"\n	"+n+"\n</tr>")})};


},{"jquery":"jquery","underscore":"underscore"}]},{},[1]);
